---
title: "Aula 01: Introdu√ß√£o ao R na Hidrologia"
date: "`r Sys.Date()`"
output: html_document
---

# 1. Introdu√ß√£o

Bem-vindo ao Minicurso de R. Vamos come√ßar entendendo como o R "pensa".
Material de apoio sugerido: [R for Hydrologists (UNESCO)](https://www.unesco-floods.eu/r-software-in-hydrology/)

<center>
![Artwork by @allison_horst](https://raw.githubusercontent.com/allisonhorst/stats-illustrations/master/rstats-artwork/r_first_then.png){width=60%}
</center>

## 1.1 R como Calculadora
O comando b√°sico do R √© a execu√ß√£o direta de matem√°tica.

```{r calc}

# Opera√ß√µes b√°sicas

10 + 20

5 * 12

1 + 2

12 * 5

12 ^ 2

2 / 2

11 %% 3

sqrt(9)


# Fun√ß√µes Matem√°ticas

sqrt(100)       # Raiz quadrada

log10(1000)     # Log na base 10

exp(1)          # N√∫mero de Euler (e)
```



### Opera√ß√µes vetoriais

No R, opera√ß√µes com vetores s√£o **vetorizadas** por padr√£o:

```{r}
2 * c(1, 2, 3, 4, 5)
2 + c(1, 2, 3, 4, 5)

# Entre vetores:

c(1, 3, 5, 7) * c(2, 4, 6, 8)
```


## 1.2 Objetos e Atribui√ß√£o

### Classes de objetos

```{r}
class(2)
class("texto")
class(TRUE)
class(2L)
```


---

# 4. Principais tipos de dados

## 4.1 Vetores

```{r}
x <- c(1, 2, 3, 4)
x
class(x)
```


```{r}
#Vetores l√≥gicos:

y <- c(TRUE, FALSE, T, F)
y

```



## 4.2 Fatores

Fatores representam vari√°veis categ√≥ricas:


```{r}
x <- factor(c("normal", "aten√ß√£o", "alerta", "inunda√ß√£o"))
x
table(x)
```


Fatores ordenados:


```{r}
y <- factor(x,
levels = c("normal", "aten√ß√£o", "alerta", "inunda√ß√£o"),
ordered = TRUE)
y
y <= "alerta"

```


> üé® **Ilustra√ß√£o sugerida:** *Factors Explained* ‚Äì excelente para evitar confus√µes comuns.

---

## 4.3 Coer√ß√£o de tipos


```{r}
as.numeric(TRUE)
as.character(10)
as.numeric(c("1", "2", "3"))
```


‚ö†Ô∏è Nem toda coer√ß√£o √© poss√≠vel:

```{r}
as.numeric(c("ola", "dia"))

```


---

# 5. Indexa√ß√£o


```{r}
x <- 11:20
x[1]
x[c(1, 3, 5)]
x[-2]
```



Indexa√ß√£o l√≥gica:

```{r}

x[x > 15]
```


---

# 6. Estruturas de dados

## 6.1 Matrizes

```{r}
m <- matrix(1:9, nrow = 3)
m
m[1, 2]
m[, 3]
```



## 6.2 Data frames

```{r}
DF <- data.frame(id = 1:3,
classe = c("A", "B", "C"))
DF
class(DF)

```


## 6.3 Listas

```{r}
x <- list(1, "texto", DF, TRUE)
x
x[[3]]
```


Na hidrologia, raramente trabalhamos com n√∫meros soltos. Guardamos eles em objetos. Use `<-` para atribuir valores. 



# 7. Fun√ß√µes

Fun√ß√µes s√£o blocos reutiliz√°veis de c√≥digo.



### Criando uma fun√ß√£o


```{r}
# √Årea de um ret√¢ngulo
area_ret <- function(lado1, lado2){
  # O que a sua fun√ß√£o faz
  area <- lado1*lado2
  
  # O que a fun√ß√£o retorna
  return(area)
}
area_ret(5)

area_ret(5, 10)
```

```{r}
# Exemplo: √Årea de uma bacia e precipita√ß√£o m√©dia
area_bacia_km2 <- 500
precipitacao_mm <- 1200
```

O R √© **case sensitive**:


```{r}
X <- 10
x
```

```{r}
# C√°lculo do Volume (convers√£o simplificada)
# 1 mm = 1 litro/m2
# 1 km2 = 1.000.000 m2
volume_m3 <- area_bacia_km2 * 1e6 * (precipitacao_mm / 1000)

print(paste("O volume total precipitado √©:", volume_m3, "m3"))
```

## 1.3. Vetores (S√©ries de Dados)
A unidade b√°sica de dados no R √© o vetor. Pense nele como uma coluna do Excel.

```{r}
# S√©rie fict√≠cia de vaz√µes (m3/s)
vazoes <- c(12.5, 14.2, 10.0, 55.4, 8.2, NA) # NA indica dado faltante

# Estat√≠sticas b√°sicas
mean(vazoes, na.rm = TRUE) # na.rm = TRUE ignora os NAs
max(vazoes, na.rm = TRUE)
min(vazoes, na.rm = TRUE)

# Filtrando dados (Ex: vaz√µes de cheia acima de 15 m3/s)
cheias <- vazoes[vazoes > 15 & !is.na(vazoes)]
print(cheias)
```
Dica: O R √© case-sensitive. Vazao √© diferente de vazao.





---

# 8. Estruturas condicionais

```{r}
x <- 10
ifelse(x < 100,
"x √© menor que 100",
"x √© maior ou igual a 100")

```


Uso de `if` simples:

```{r}
x <- 3.7
if(class(x) != "integer"){
x <- as.integer(round(x))
}
x
```



---

# 9. Loops

## 9.1 Loop `for`

```{r}
for(i in 1:5){
print(i)
}
```



Aplica√ß√£o pr√°tica:

```{r}
vetor_lado1 <- c(10, 20, 30)
vetor_lado2 <- c(5, 10, 15)

for(i in 1:length(vetor_lado1)){
print(area_ret(vetor_lado1[i], vetor_lado2[i]))
}
```



## 9.2 Loop `while`


```{r}

i <- 0
while(i <= 5){
print(i)
i <- i + 1
}
```


---

# 10. Exerc√≠cios

1. Crie um vetor com os n√∫meros de 1 a 20 e selecione apenas os pares.
2. Crie uma fun√ß√£o que calcule a √°rea de um c√≠rculo.
3. Crie um `data.frame` com tr√™s colunas: ano, m√™s e vaz√£o.
4. Use um loop `for` para calcular a √°rea de v√°rios ret√¢ngulos.





---

# Pr√≥xima aula

‚û°Ô∏è **Aula 2 ‚Äì Obten√ß√£o de dados hidrol√≥gicos e webservices (ANA)**

Vamos aprender a:

* Ler arquivos externos;
* Acessar dados online;
* Trabalhar com datas;
* Criar fun√ß√µes aplicadas √† hidrologia.
